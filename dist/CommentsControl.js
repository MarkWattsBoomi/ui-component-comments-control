!function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e){t.exports=React},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.componentDidMount=function(){},e.prototype.render=function(){var t=[];if(this.props.data)for(var e=0;e<this.props.data.properties.length;e++){var o=this.props.data.properties[e];if(this.props.headers[o.developerName].isDisplayValue){var n,r=this.props.headers[o.developerName].order;switch(o.contentType){case"ContentString":n=o.contentValue;break;case"ContentDateTime":n=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}).format(new Date(o.contentValue));break;default:n=o.contentValue}t[r]=a.createElement("td",{className:"cc-tbody-row-cell"},n)}}return a.createElement("tr",{className:"cc-tbody-row"},t)},e}(a.Component);e.default=r},function(t,e){},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.componentDidMount=function(){},e.prototype.render=function(){if(this.props.data){var t=manywho.utils.getObjectDataProperty(this.props.data.properties,"Author").contentValue,e=manywho.utils.getObjectDataProperty(this.props.data.properties,"Date").contentValue,o=manywho.utils.getObjectDataProperty(this.props.data.properties,"Comment").contentValue;e=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}).format(new Date(e));var n;return 1==this.props.canDelete&&(n=a.createElement("span",{className:"glyphicon glyphicon-remove delete-comment-button",title:"Remove Comment",onClick:this.props.delete.bind(this,this.props.data)})),a.createElement("div",{className:"comment-bubble"},a.createElement("div",{className:"comment-bubble-client"},a.createElement("div",{className:"comment-bubble-client-header"},a.createElement("div",{style:{float:"left"}},a.createElement("span",{className:"comment-bubble-client-header-span"},"Added by ",t," on ",e)),a.createElement("div",{style:{float:"right"}},n)),a.createElement("div",{className:"comment-bubble-client-body"},a.createElement("span",{className:"comment-bubble-client-body-span"},o))))}return a.createElement("div",null)},e}(a.Component);e.default=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=function(t){function e(e){var o=t.call(this,e)||this;return o.handleKeyUp=o.handleKeyUp.bind(o),o.handleOutsideClick=o.handleOutsideClick.bind(o),o}return n(e,t),e.prototype.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp,!1),document.addEventListener("click",this.handleOutsideClick,!1)},e.prototype.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp,!1),document.removeEventListener("click",this.handleOutsideClick,!1)},e.prototype.handleKeyUp=function(t){this.props.onCloseRequest},e.prototype.handleOutsideClick=function(t){this.props.onCloseRequest},e.prototype.render=function(){var t=this,e=this.props,o=e.onCloseRequest,n=e.children;e.classes;return a.createElement("div",{className:"modal-redaction"},a.createElement("div",{className:"modal",ref:function(e){return t.modal=e}},a.createElement("div",{className:"modal-content"},n)),a.createElement("button",{type:"button",className:"modal-close-button",onClick:o}))},e}(a.Component);e.default=r},function(t,e,o){"use strict";function n(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}Object.defineProperty(e,"__esModule",{value:!0}),n(o(6)),n(o(1)),n(o(7)),n(o(3)),n(o(4))},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=o(1);o(2);var i=function(t){function e(e){var o=t.call(this,e)||this;o.componentId="",o.flowKey="",o.attributes={},o.readonly=!1,o.componentId=e.id,o.flowKey=e.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var a in n.attributes)o.attributes[a]=n.attributes[a];return o}return n(e,t),e.prototype.componentDidMount=function(){var t,e=manywho.model.getComponent(this.componentId,this.flowKey),o=manywho.state.getComponent(this.componentId,this.flowKey)||{};t=o.objectData?o.objectData:e.objectData,t=JSON.parse(JSON.stringify(t));var n={objectData:[t]};manywho.state.setComponent(this.componentId,n,this.flowKey,!0),this.readonly=!e.isEditable},e.prototype.getAttribute=function(t){return this.attributes[t]?this.attributes[t]:null},e.prototype.save=function(){var t=(manywho.state.getComponent(this.componentId,this.flowKey),manywho.model.getComponent(this.componentId,this.flowKey)),e=t.objectData[0];e=JSON.parse(JSON.stringify(e)),e.isSelected=!0;var o={objectData:[e]};manywho.state.setComponent(this.componentId,o,this.flowKey,!0),this.forceUpdate()},e.prototype.render=function(){var t=manywho.model.getComponent(this.componentId,this.flowKey),e=(manywho.state.getComponent(this.componentId,this.flowKey),this.getAttribute("Title")||"Comments"),o=(t.width,t.height+"px"),n={};n.width="100%",n.height=o;var i=[],s=[],c=[];if(t.columns&&t.columns.length>0)for(var l=0;l<t.columns.length;l++){var p=t.columns[l];i[p.developerName]=p,i[p.developerName].isDisplayValue&&(s[p.order]=a.createElement("td",{className:"cc-column-header"},t.columns[l].label))}if(t.objectData&&t.objectData.length>0)for(var m=0;m<t.objectData.length;m++)c.push(a.createElement(r.default,{data:t.objectData[m],headers:i}));return a.createElement("div",{className:"cc-control"},a.createElement("div",{className:"cc-header"},a.createElement("div",{style:{float:"left"}},a.createElement("span",{className:"cc-header-title"},e)),a.createElement("div",{style:{float:"right"}},a.createElement("span",{className:"glyphicon glyphicon-plus cc-header-button",title:"Add Comment",onClick:this.addComment.bind(this)}))),a.createElement("div",{className:"cc-body"},a.createElement("table",{className:"cc-table"},a.createElement("thead",{className:"cc-thead"},a.createElement("tr",{className:"cc-thead-row"},s)),a.createElement("tbody",{className:"cc-tbody"},c))))},e.prototype.addComment=function(){},e}(a.Component);manywho.component.register("CommentsTable",i),e.default=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),r=o(3),i=o(4);o(2);var s=function(t){function e(e){var o=t.call(this,e)||this;o.componentId="",o.flowKey="",o.attributes={},o.readonly=!1,o.modalShown=!1,o.componentId=e.id,o.flowKey=e.flowKey;var n=manywho.model.getComponent(o.props.id,o.props.flowKey);if(n.attributes)for(var a in n.attributes)o.attributes[a]=n.attributes[a];return o}return n(e,t),e.prototype.componentDidMount=function(){var t,e=manywho.model.getComponent(this.componentId,this.flowKey),o=manywho.state.getComponent(this.componentId,this.flowKey)||{};t=o.objectData?o.objectData:e.objectData,t=JSON.parse(JSON.stringify(t));var n={objectData:t};manywho.state.setComponent(this.componentId,n,this.flowKey,!0),this.readonly=!e.isEditable},e.prototype.getAttribute=function(t){return this.attributes[t]?this.attributes[t]:null},e.prototype.compareObjectData=function(t,e){return manywho.utils.getObjectDataProperty(t.properties,"Author").contentValue==manywho.utils.getObjectDataProperty(e.properties,"Author").contentValue&&manywho.utils.getObjectDataProperty(t.properties,"Date").contentValue===manywho.utils.getObjectDataProperty(e.properties,"Date").contentValue&&manywho.utils.getObjectDataProperty(t.properties,"Comment").contentValue===manywho.utils.getObjectDataProperty(e.properties,"Comment").contentValue},e.prototype.deleteComment=function(t){for(var e=(manywho.state.getComponent(this.componentId,this.flowKey),manywho.model.getComponent(this.componentId,this.flowKey)),o=[],n=0;n<e.objectData.length;n++){var a=e.objectData[n];0==this.compareObjectData(a,t)&&(a=JSON.parse(JSON.stringify(a)),o.push(a))}var r={objectData:o};manywho.state.setComponent(this.componentId,r,this.flowKey,!0),manywho.engine.sync(this.flowKey)},e.prototype.addNewComment=function(t){var e=(manywho.state.getComponent(this.componentId,this.flowKey),manywho.model.getComponent(this.componentId,this.flowKey)),o={};e.objectData&&e.objectData.length>0?o=e.objectData[0]:(o.properties=[],o.developerName="Comment",o.properties.push({developerName:"Author",contentType:"ContentString",contentValue:""}),o.properties.push({developerName:"Date",contentType:"ContentDateTime",contentValue:""}),o.properties.push({developerName:"Comment",contentType:"ContentString",contentValue:""})),o=JSON.parse(JSON.stringify(o)),o.isSelected=!0,manywho.utils.setObjectDataProperty(o.properties,"Author","me"),manywho.utils.setObjectDataProperty(o.properties,"Date",(new Date).toISOString()),manywho.utils.setObjectDataProperty(o.properties,"Comment",t);var n=e.objectData||[];n.push(o);var a={objectData:n};manywho.state.setComponent(this.componentId,a,this.flowKey,!0),manywho.engine.sync(this.flowKey)},e.prototype.render=function(){var t=this,e=manywho.model.getComponent(this.componentId,this.flowKey),o=(manywho.state.getComponent(this.componentId,this.flowKey),this.getAttribute("Title")||"Comments"),n="true"==this.getAttribute("Can Delete")||"true"==this.getAttribute("CanDelete"),s=(e.width,e.height+"px"),c={};c.width="100%",c.height=s;var l=[];if(e.objectData&&e.objectData.length>0)for(var p=0;p<e.objectData.length;p++)l.push(a.createElement(r.default,{data:e.objectData[p],props:this.props,canDelete:n,delete:this.deleteComment.bind(this)}));var m;1==e.isEditable&&(m=a.createElement("span",{className:"glyphicon glyphicon-plus add-dialog-header-button",title:"Add Comment",onClick:this.modalClose.bind(this)}));var d;return this.modalShown&&(d=a.createElement(i.default,{onCloseRequest:this.modalClose.bind(this)},a.createElement("div",{className:"add-dialog"},a.createElement("div",{className:"add-dialog-header"},a.createElement("div",{style:{float:"left"}},a.createElement("span",{className:"add-dialog-header-title"},"Add a new comment")),a.createElement("div",{style:{float:"right"}},m)),a.createElement("div",{className:"add-dialog-body"},a.createElement("div",{className:"add-dialog-body-client"},a.createElement("div",{className:"add-dialog-field"},a.createElement("span",{className:"add-dialog-input-label"},"Comment"),a.createElement("input",{className:"add-dialog-input",ref:function(e){t.newComment=e},type:"text",width:"60px"})))),a.createElement("div",{className:"add-dialog-button-bar"},a.createElement("button",{className:"add-dialog-button-bar-button",title:"Add Comment",onClick:this.modalClose.bind(this,"ADD")},"Add"),a.createElement("button",{className:"add-dialog-button-bar-button",title:"Cancel",onClick:this.modalClose.bind(this)},"Cancel"))))),a.createElement("div",{className:"comment-list"},a.createElement("div",{className:"comment-list-header"},a.createElement("div",{style:{float:"left"}},a.createElement("span",{className:"comment-list-header-title"},o)),a.createElement("div",{style:{float:"right"}},a.createElement("span",{className:"glyphicon glyphicon-plus comment-list-header-button",title:"Add Comment",onClick:this.addComment.bind(this)}))),a.createElement("div",{className:"comment-list-body"},l),d)},e.prototype.addComment=function(){this.modalShown=!0,this.forceUpdate()},e.prototype.modalClose=function(t){if(t&&"ADD"==t){var e=this.newComment.value;this.addNewComment(e)}this.modalShown=!1,this.forceUpdate()},e}(a.Component);manywho.component.register("CommentsList",s),e.default=s}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vQ29tbWVudHNDb250cm9sLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyNTI1MmE2NDBmZWI4MDgxOTc3MCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiIiwid2VicGFjazovLy8uL3NyYy9Db21tZW50VGFibGVJdGVtLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tbWVudEJ1YmJsZS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGFsRGlhbG9nLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9Db21tZW50c1RhYmxlLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tbWVudHNMaXN0LnRzeCJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUmVhY3QiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsInZhbHVlIiwiQ29tbWVudFRhYmxlSXRlbSIsIl9zdXBlciIsInByb3BzIiwiY29tcG9uZW50RGlkTW91bnQiLCJyZW5kZXIiLCJjb2xzIiwiZGF0YSIsImNQb3MiLCJwcm9wZXJ0aWVzIiwibGVuZ3RoIiwiY29sIiwiaGVhZGVycyIsImRldmVsb3Blck5hbWUiLCJpc0Rpc3BsYXlWYWx1ZSIsInBvcyIsIm9yZGVyIiwiY29udGVudFR5cGUiLCJjb250ZW50VmFsdWUiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJmb3JtYXQiLCJEYXRlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIkNvbXBvbmVudCIsImRlZmF1bHQiLCJDb21tZW50QnViYmxlIiwid2hvIiwibWFueXdobyIsInV0aWxzIiwiZ2V0T2JqZWN0RGF0YVByb3BlcnR5Iiwid2hlbiIsIndoYXQiLCJkZWxldGVCdXR0b24iLCJjYW5EZWxldGUiLCJ0aXRsZSIsIm9uQ2xpY2siLCJkZWxldGUiLCJiaW5kIiwic3R5bGUiLCJmbG9hdCIsIk1vZGFsRGlhbG9nIiwiX3RoaXMiLCJoYW5kbGVLZXlVcCIsImhhbmRsZU91dHNpZGVDbGljayIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJvbkNsb3NlUmVxdWVzdCIsIl9hIiwiY2hpbGRyZW4iLCJjbGFzc2VzIiwicmVmIiwibm9kZSIsIm1vZGFsIiwidHlwZSIsIl9fZXhwb3J0IiwiQ29tbWVudFRhYmxlSXRlbV8xIiwiQ29tbWVudHNUYWJsZSIsImNvbXBvbmVudElkIiwiZmxvd0tleSIsImF0dHJpYnV0ZXMiLCJyZWFkb25seSIsImlkIiwiZmxvd01vZGVsIiwibW9kZWwiLCJnZXRDb21wb25lbnQiLCJrZXkiLCJvYmplY3REYXRhIiwiZmxvd1N0YXRlIiwic3RhdGUiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJuZXdTdGF0ZSIsInNldENvbXBvbmVudCIsImlzRWRpdGFibGUiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVOYW1lIiwic2F2ZSIsImlzU2VsZWN0ZWQiLCJmb3JjZVVwZGF0ZSIsImNhcHRpb24iLCJoZWlnaHQiLCJ3aWR0aCIsImhlYWRzIiwiY29tbWVudHMiLCJjb2x1bW5zIiwiaFBvcyIsImxhYmVsIiwicHVzaCIsImFkZENvbW1lbnQiLCJjb21wb25lbnQiLCJyZWdpc3RlciIsIkNvbW1lbnRCdWJibGVfMSIsIk1vZGFsRGlhbG9nXzEiLCJDb21tZW50c0xpc3QiLCJtb2RhbFNob3duIiwiY29tcGFyZU9iamVjdERhdGEiLCJvbmUiLCJ0d28iLCJkZWxldGVDb21tZW50IiwiY29tbWVudCIsIm9iamVjdERhdGFBcnJheSIsIm9Qb3MiLCJlbmdpbmUiLCJzeW5jIiwiYWRkTmV3Q29tbWVudCIsInNldE9iamVjdERhdGFQcm9wZXJ0eSIsInRvSVNPU3RyaW5nIiwiYWRkQnV0dG9uIiwibW9kYWxDbG9zZSIsIm5ld0NvbW1lbnQiLCJhY3Rpb24iXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBZixHQUNBLEdBQUFRLEdBQUFSLEtBQUFnQixXQUNBLFdBQTJCLE1BQUFoQixHQUFBLFNBQzNCLFdBQWlDLE1BQUFBLEdBRWpDLE9BREFKLEdBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBUSxFQUFBQyxHQUFzRCxNQUFBUixRQUFBUyxVQUFBQyxlQUFBakIsS0FBQWMsRUFBQUMsSUFHdER0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QUVqRHBHLEVBQUFxQyxjQUFBLE9BQUtpQixPQUFRQyxNQUFNLFVBQ2Z2RCxFQUFBcUMsY0FBQSxRQUFNQyxVQUFVLHNEQUFzRFksTUFBTSxjQUFjQyxRQUFTakQsS0FBSzJHLFdBQVd4RCxLQUFLbkQsVUFJaElGLEVBQUFxQyxjQUFBLE9BQUtDLFVBQVUscUJBQ1hrRSxHQUVIaEMsSUFJakIwQyxFQUFBdEgsVUFBQWlILFdBQUEsV0FFSTNHLEtBQUtpSCxZQUFhLEVBQ2xCakgsS0FBS2lHLGVBR1RlLEVBQUF0SCxVQUFBcUksV0FBQSxTQUFXRSxHQUVQLEdBQUdBLEdBQWtCLE9BQVJBLEVBQ2IsQ0FDSSxHQUFJWCxHQUFXdEgsS0FBS2dJLFdBQVd2SCxLQUMvQlQsTUFBSzJILGNBQWNMLEdBR3ZCdEgsS0FBS2lILFlBQWEsRUFDbEJqSCxLQUFLaUcsZUFJYmUsR0F2UDJCbEgsRUFBTXVDLFVBeVBqQ0ksU0FBUW1FLFVBQVVDLFNBQVMsZUFBZ0JHLEdBRTNDMUksRUFBQWdFLFFBQWUwRSIsImZpbGUiOiJDb21tZW50c0NvbnRyb2wuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG52YXIgQ29tbWVudFRhYmxlSXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb21tZW50VGFibGVJdGVtLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29tbWVudFRhYmxlSXRlbShwcm9wcykge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIENvbW1lbnRUYWJsZUl0ZW0ucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbW1lbnRUYWJsZUl0ZW0ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29scyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRhdGEpIHtcclxuICAgICAgICAgICAgLy9lYWNoIHByb3BlcnR5IG9mIGRhdGEgaXMgYSBjb2x1bW5cclxuICAgICAgICAgICAgZm9yICh2YXIgY1BvcyA9IDA7IGNQb3MgPCB0aGlzLnByb3BzLmRhdGEucHJvcGVydGllcy5sZW5ndGg7IGNQb3MrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMucHJvcHMuZGF0YS5wcm9wZXJ0aWVzW2NQb3NdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaGVhZGVyc1tjb2wuZGV2ZWxvcGVyTmFtZV0uaXNEaXNwbGF5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMucHJvcHMuaGVhZGVyc1tjb2wuZGV2ZWxvcGVyTmFtZV0ub3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2wuY29udGVudFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkNvbnRlbnRTdHJpbmdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sLmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQ29udGVudERhdGVUaW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1HQicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXk6ICcyLWRpZ2l0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZm9ybWF0KG5ldyBEYXRlKGNvbC5jb250ZW50VmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb2wuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHNbcG9zXSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJjYy10Ym9keS1yb3ctY2VsbFwiIH0sIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHsgY2xhc3NOYW1lOiBcImNjLXRib2R5LXJvd1wiIH0sIGNvbHMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21tZW50VGFibGVJdGVtO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb21tZW50VGFibGVJdGVtO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG52YXIgQ29tbWVudEJ1YmJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb21tZW50QnViYmxlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29tbWVudEJ1YmJsZShwcm9wcykge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIENvbW1lbnRCdWJibGUucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbW1lbnRCdWJibGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5kYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciB3aG8gPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eSh0aGlzLnByb3BzLmRhdGEucHJvcGVydGllcywgXCJBdXRob3JcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgd2hlbiA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHRoaXMucHJvcHMuZGF0YS5wcm9wZXJ0aWVzLCBcIkRhdGVcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgd2hhdCA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHRoaXMucHJvcHMuZGF0YS5wcm9wZXJ0aWVzLCBcIkNvbW1lbnRcIikuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAvL2NvbnZlcnQgd2hlbiB0byBmcmllbmRseSBmb3JtYXRcclxuICAgICAgICAgICAgd2hlbiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1HQicsIHtcclxuICAgICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsXHJcbiAgICAgICAgICAgICAgICBkYXk6ICcyLWRpZ2l0J1xyXG4gICAgICAgICAgICB9KS5mb3JtYXQobmV3IERhdGUod2hlbikpO1xyXG4gICAgICAgICAgICB2YXIgZGVsZXRlQnV0dG9uO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5EZWxldGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uID0gUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmUgZGVsZXRlLWNvbW1lbnQtYnV0dG9uXCIsIHRpdGxlOiBcIlJlbW92ZSBDb21tZW50XCIsIG9uQ2xpY2s6IHRoaXMucHJvcHMuZGVsZXRlLmJpbmQodGhpcywgdGhpcy5wcm9wcy5kYXRhKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWJ1YmJsZVwiIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtYnViYmxlLWNsaWVudFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWJ1YmJsZS1jbGllbnQtaGVhZGVyXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGZsb2F0OiAnbGVmdCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1idWJibGUtY2xpZW50LWhlYWRlci1zcGFuXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFkZGVkIGJ5IFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdobyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBvbiBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogeyBmbG9hdDogJ3JpZ2h0JyB9IH0sIGRlbGV0ZUJ1dHRvbikpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1idWJibGUtY2xpZW50LWJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWJ1YmJsZS1jbGllbnQtYm9keS1zcGFuXCIgfSwgd2hhdCkpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbW1lbnRCdWJibGU7XHJcbn0oUmVhY3QuQ29tcG9uZW50KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENvbW1lbnRCdWJibGU7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxuLy8gRGVjbGFyYXRpb24gb2YgdGhlIGNvbXBvbmVudCBhcyBSZWFjdCBDbGFzcyBDb21wb25lbnRcclxudmFyIE1vZGFsRGlhbG9nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE1vZGFsRGlhbG9nLCBfc3VwZXIpO1xyXG4gICAgLy8gSW5pdCBvZiB0aGUgY29tcG9uZW50IGJlZm9yZSBpdCBpcyBtb3VudGVkLlxyXG4gICAgZnVuY3Rpb24gTW9kYWxEaWFsb2cocHJvcHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5oYW5kbGVLZXlVcCA9IF90aGlzLmhhbmRsZUtleVVwLmJpbmQoX3RoaXMpO1xyXG4gICAgICAgIF90aGlzLmhhbmRsZU91dHNpZGVDbGljayA9IF90aGlzLmhhbmRsZU91dHNpZGVDbGljay5iaW5kKF90aGlzKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgbGlzdGVuZXJzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC5cclxuICAgIE1vZGFsRGlhbG9nLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgaW1tZWRpYXRlbHkgYmVmb3JlIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBhbmQgZGVzdHJveWVkLlxyXG4gICAgTW9kYWxEaWFsb2cucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAsIGZhbHNlKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gSGFuZGxlIHRoZSBrZXkgcHJlc3MgZXZlbnQuXHJcbiAgICBNb2RhbERpYWxvZy5wcm90b3R5cGUuaGFuZGxlS2V5VXAgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG9uQ2xvc2VSZXF1ZXN0ID0gdGhpcy5wcm9wcy5vbkNsb3NlUmVxdWVzdDtcclxuICAgICAgICB2YXIga2V5cyA9IHtcclxuICAgICAgICAgICAgMjc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIG9uQ2xvc2VSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBfdGhpcy5oYW5kbGVLZXlVcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy9pZiAoa2V5c1tlLmtleUNvZGVdKSB7IGtleXNbZS5rZXlDb2RlXSgpOyB9XHJcbiAgICB9O1xyXG4gICAgLy8gSGFuZGxlIHRoZSBtb3VzZSBjbGljayBvbiBicm93c2VyIHdpbmRvdy5cclxuICAgIE1vZGFsRGlhbG9nLnByb3RvdHlwZS5oYW5kbGVPdXRzaWRlQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBvbkNsb3NlUmVxdWVzdCA9IHRoaXMucHJvcHMub25DbG9zZVJlcXVlc3Q7XHJcbiAgICAgICAgLy9pZiAoIXRoaXMubW9kYWwpIHtcclxuICAgICAgICAvLyAgaWYgKCF0aGlzLm1vZGFsLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgIC8vICAgIG9uQ2xvc2VSZXF1ZXN0KCk7XHJcbiAgICAgICAgLy8gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgZmFsc2UpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL31cclxuICAgIH07XHJcbiAgICAvLyBSZW5kZXIgdGhlIGNvbXBvbmVudCBwYXNzaW5nIG9uQ2xvc2VSZXF1ZXN0IGFuZCBjaGlsZHJlbiBhcyBwcm9wcy5cclxuICAgIE1vZGFsRGlhbG9nLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBvbkNsb3NlUmVxdWVzdCA9IF9hLm9uQ2xvc2VSZXF1ZXN0LCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBjbGFzc2VzID0gX2EuY2xhc3NlcztcclxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibW9kYWwtcmVkYWN0aW9uXCIgfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtb2RhbFwiLCByZWY6IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiAoX3RoaXMubW9kYWwgPSBub2RlKTsgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCIgfSwgY2hpbGRyZW4pKSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJtb2RhbC1jbG9zZS1idXR0b25cIiwgb25DbGljazogb25DbG9zZVJlcXVlc3QgfSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTW9kYWxEaWFsb2c7XHJcbn0oUmVhY3QuQ29tcG9uZW50KSk7XHJcbi8vIEV4cG9ydCB0aGUgY29tcG9uZW50IHRvIHVzZSBpdCBpbiBvdGhlciBjb21wb25lbnRzLlxyXG5leHBvcnRzLmRlZmF1bHQgPSBNb2RhbERpYWxvZztcclxuXG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oNykpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcclxudmFyIENvbW1lbnRUYWJsZUl0ZW1fMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcbl9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbnZhciBDb21tZW50c1RhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENvbW1lbnRzVGFibGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb21tZW50c1RhYmxlKHByb3BzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmF0dHJpYnV0ZXMgPSB7fTtcclxuICAgICAgICBfdGhpcy5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLmNvbXBvbmVudElkID0gcHJvcHMuaWQ7XHJcbiAgICAgICAgX3RoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcbiAgICAgICAgLy9wdXNoIGF0dHJpYnV0ZXMgaW50byBrZXllZCBtYXAgXHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KF90aGlzLnByb3BzLmlkLCBfdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGZsb3dNb2RlbC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hdHRyaWJ1dGVzW2tleV0gPSBmbG93TW9kZWwuYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENvbW1lbnRzVGFibGUucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhO1xyXG4gICAgICAgIGlmIChmbG93U3RhdGUub2JqZWN0RGF0YSkge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd1N0YXRlLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd01vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE6IFtvYmplY3REYXRhXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgbmV3U3RhdGUsIHRoaXMuZmxvd0tleSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5yZWFkb25seSA9ICFmbG93TW9kZWwuaXNFZGl0YWJsZTtcclxuICAgIH07XHJcbiAgICBDb21tZW50c1RhYmxlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb21tZW50c1RhYmxlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhID0gZmxvd01vZGVsLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgb2JqZWN0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqZWN0RGF0YSkpO1xyXG4gICAgICAgIG9iamVjdERhdGEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgLypcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiT3BlcmF0aW5nU3lzdGVtXCIsIHRoaXMub3BlcmF0aW5nU3lzdGVtKTtcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiQnJvd3NlclZlbmRvclwiLCB0aGlzLmJyb3dzZXJWZW5kb3IpO1xyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJCcm93c2VyTmFtZVwiLCB0aGlzLmJyb3dzZXJOYW1lKTtcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiTG9uZ2l0dWRlXCIsIHRoaXMubG9uZ2l0dWRlKTtcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiTGF0aXR1ZGVcIiwgdGhpcy5sYXRpdHVkZSk7XHJcbiovXHJcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhOiBbb2JqZWN0RGF0YV1cclxuICAgICAgICB9O1xyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH07XHJcbiAgICBDb21tZW50c1RhYmxlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIHRoaXMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIHRoaXMuZmxvd0tleSk7XHJcbiAgICAgICAgdmFyIGNhcHRpb24gPSB0aGlzLmdldEF0dHJpYnV0ZShcIlRpdGxlXCIpIHx8IFwiQ29tbWVudHNcIjtcclxuICAgICAgICB2YXIgd2lkdGggPSBmbG93TW9kZWwud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IGZsb3dNb2RlbC5oZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgdmFyIHN0eWxlID0ge307XHJcbiAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHZhciBoZWFkcyA9IFtdO1xyXG4gICAgICAgIHZhciBoZWFkZXJzID0gW107XHJcbiAgICAgICAgdmFyIGNvbW1lbnRzID0gW107XHJcbiAgICAgICAgaWYgKGZsb3dNb2RlbC5jb2x1bW5zICYmIGZsb3dNb2RlbC5jb2x1bW5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaFBvcyA9IDA7IGhQb3MgPCBmbG93TW9kZWwuY29sdW1ucy5sZW5ndGg7IGhQb3MrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGZsb3dNb2RlbC5jb2x1bW5zW2hQb3NdO1xyXG4gICAgICAgICAgICAgICAgaGVhZHNbY29sLmRldmVsb3Blck5hbWVdID0gY29sO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRzW2NvbC5kZXZlbG9wZXJOYW1lXS5pc0Rpc3BsYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbY29sLm9yZGVyXSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLCB7IGNsYXNzTmFtZTogXCJjYy1jb2x1bW4taGVhZGVyXCIgfSwgZmxvd01vZGVsLmNvbHVtbnNbaFBvc10ubGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmbG93TW9kZWwub2JqZWN0RGF0YSAmJiBmbG93TW9kZWwub2JqZWN0RGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGNQb3MgPSAwOyBjUG9zIDwgZmxvd01vZGVsLm9iamVjdERhdGEubGVuZ3RoOyBjUG9zKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChDb21tZW50VGFibGVJdGVtXzEuZGVmYXVsdCwgeyBkYXRhOiBmbG93TW9kZWwub2JqZWN0RGF0YVtjUG9zXSwgaGVhZGVyczogaGVhZHMgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNjLWNvbnRyb2xcIiB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNjLWhlYWRlclwiIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZmxvYXQ6ICdsZWZ0JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiY2MtaGVhZGVyLXRpdGxlXCIgfSwgY2FwdGlvbikpLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGZsb2F0OiAncmlnaHQnIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXMgY2MtaGVhZGVyLWJ1dHRvblwiLCB0aXRsZTogXCJBZGQgQ29tbWVudFwiLCBvbkNsaWNrOiB0aGlzLmFkZENvbW1lbnQuYmluZCh0aGlzKSB9KSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNjLWJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiBcImNjLXRhYmxlXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGhlYWRcIiwgeyBjbGFzc05hbWU6IFwiY2MtdGhlYWRcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidHJcIiwgeyBjbGFzc05hbWU6IFwiY2MtdGhlYWQtcm93XCIgfSwgaGVhZGVycykpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiLCB7IGNsYXNzTmFtZTogXCJjYy10Ym9keVwiIH0sIGNvbW1lbnRzKSkpKTtcclxuICAgIH07XHJcbiAgICBDb21tZW50c1RhYmxlLnByb3RvdHlwZS5hZGRDb21tZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21tZW50c1RhYmxlO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignQ29tbWVudHNUYWJsZScsIENvbW1lbnRzVGFibGUpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb21tZW50c1RhYmxlO1xyXG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbnZhciBDb21tZW50QnViYmxlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG52YXIgTW9kYWxEaWFsb2dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XHJcbl9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbnZhciBDb21tZW50c0xpc3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ29tbWVudHNMaXN0LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29tbWVudHNMaXN0KHByb3BzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29tcG9uZW50SWQgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBcIlwiO1xyXG4gICAgICAgIF90aGlzLmF0dHJpYnV0ZXMgPSB7fTtcclxuICAgICAgICBfdGhpcy5yZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLm1vZGFsU2hvd24gPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIF90aGlzLmZsb3dLZXkgPSBwcm9wcy5mbG93S2V5O1xyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudChfdGhpcy5wcm9wcy5pZCwgX3RoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgaWYgKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDb21tZW50c0xpc3QucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhO1xyXG4gICAgICAgIGlmIChmbG93U3RhdGUub2JqZWN0RGF0YSkge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd1N0YXRlLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd01vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE6IG9iamVjdERhdGFcclxuICAgICAgICB9O1xyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSAhZmxvd01vZGVsLmlzRWRpdGFibGU7XHJcbiAgICB9O1xyXG4gICAgQ29tbWVudHNMaXN0LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlTmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb21tZW50c0xpc3QucHJvdG90eXBlLmNvbXBhcmVPYmplY3REYXRhID0gZnVuY3Rpb24gKG9uZSwgdHdvKSB7XHJcbiAgICAgICAgaWYgKG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9uZS5wcm9wZXJ0aWVzLCBcIkF1dGhvclwiKS5jb250ZW50VmFsdWUgPT0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkodHdvLnByb3BlcnRpZXMsIFwiQXV0aG9yXCIpLmNvbnRlbnRWYWx1ZSAmJlxyXG4gICAgICAgICAgICBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShvbmUucHJvcGVydGllcywgXCJEYXRlXCIpLmNvbnRlbnRWYWx1ZSA9PT0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkodHdvLnByb3BlcnRpZXMsIFwiRGF0ZVwiKS5jb250ZW50VmFsdWUgJiZcclxuICAgICAgICAgICAgbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob25lLnByb3BlcnRpZXMsIFwiQ29tbWVudFwiKS5jb250ZW50VmFsdWUgPT09IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHR3by5wcm9wZXJ0aWVzLCBcIkNvbW1lbnRcIikuY29udGVudFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb21tZW50c0xpc3QucHJvdG90eXBlLmRlbGV0ZUNvbW1lbnQgPSBmdW5jdGlvbiAoY29tbWVudCkge1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhQXJyYXkgPSBbXTtcclxuICAgICAgICAvL2xvb3Agb3ZlciBtb2RlbCBhZGRpbmcgdG8gbmV3c3RhdGUgaWYgbm90IGVxdWFsXHJcbiAgICAgICAgZm9yICh2YXIgb1BvcyA9IDA7IG9Qb3MgPCBmbG93TW9kZWwub2JqZWN0RGF0YS5sZW5ndGg7IG9Qb3MrKykge1xyXG4gICAgICAgICAgICB2YXIgb2JqZWN0RGF0YSA9IGZsb3dNb2RlbC5vYmplY3REYXRhW29Qb3NdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJlT2JqZWN0RGF0YShvYmplY3REYXRhLCBjb21tZW50KSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqZWN0RGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0RGF0YUFycmF5LnB1c2gob2JqZWN0RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhOiBvYmplY3REYXRhQXJyYXlcclxuICAgICAgICB9O1xyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgICAgIG1hbnl3aG8uZW5naW5lLnN5bmModGhpcy5mbG93S2V5KTtcclxuICAgIH07XHJcbiAgICBDb21tZW50c0xpc3QucHJvdG90eXBlLmFkZE5ld0NvbW1lbnQgPSBmdW5jdGlvbiAoY29tbWVudCkge1xyXG4gICAgICAgIHZhciBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIHZhciBvYmplY3REYXRhID0ge307XHJcbiAgICAgICAgaWYgKGZsb3dNb2RlbC5vYmplY3REYXRhICYmIGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YSA9IGZsb3dNb2RlbC5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YS5wcm9wZXJ0aWVzID0gW107XHJcbiAgICAgICAgICAgIG9iamVjdERhdGEuZGV2ZWxvcGVyTmFtZSA9IFwiQ29tbWVudFwiO1xyXG4gICAgICAgICAgICBvYmplY3REYXRhLnByb3BlcnRpZXMucHVzaCh7IGRldmVsb3Blck5hbWU6IFwiQXV0aG9yXCIsIGNvbnRlbnRUeXBlOiBcIkNvbnRlbnRTdHJpbmdcIiwgY29udGVudFZhbHVlOiBcIlwiIH0pO1xyXG4gICAgICAgICAgICBvYmplY3REYXRhLnByb3BlcnRpZXMucHVzaCh7IGRldmVsb3Blck5hbWU6IFwiRGF0ZVwiLCBjb250ZW50VHlwZTogXCJDb250ZW50RGF0ZVRpbWVcIiwgY29udGVudFZhbHVlOiBcIlwiIH0pO1xyXG4gICAgICAgICAgICBvYmplY3REYXRhLnByb3BlcnRpZXMucHVzaCh7IGRldmVsb3Blck5hbWU6IFwiQ29tbWVudFwiLCBjb250ZW50VHlwZTogXCJDb250ZW50U3RyaW5nXCIsIGNvbnRlbnRWYWx1ZTogXCJcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqZWN0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqZWN0RGF0YSkpO1xyXG4gICAgICAgIG9iamVjdERhdGEuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkF1dGhvclwiLCBcIm1lXCIpO1xyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJEYXRlXCIsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XHJcbiAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkNvbW1lbnRcIiwgY29tbWVudCk7XHJcbiAgICAgICAgdmFyIG9iamVjdERhdGFBcnJheSA9IGZsb3dNb2RlbC5vYmplY3REYXRhIHx8IFtdO1xyXG4gICAgICAgIG9iamVjdERhdGFBcnJheS5wdXNoKG9iamVjdERhdGEpO1xyXG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YTogb2JqZWN0RGF0YUFycmF5XHJcbiAgICAgICAgfTtcclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCBuZXdTdGF0ZSwgdGhpcy5mbG93S2V5LCB0cnVlKTtcclxuICAgICAgICBtYW55d2hvLmVuZ2luZS5zeW5jKHRoaXMuZmxvd0tleSk7XHJcbiAgICB9O1xyXG4gICAgQ29tbWVudHNMaXN0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICB2YXIgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICB2YXIgY2FwdGlvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiVGl0bGVcIikgfHwgXCJDb21tZW50c1wiO1xyXG4gICAgICAgIHZhciBjYW5EZWxldGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcIkNhbiBEZWxldGVcIikgPT0gXCJ0cnVlXCIgfHwgdGhpcy5nZXRBdHRyaWJ1dGUoXCJDYW5EZWxldGVcIikgPT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gZmxvd01vZGVsLndpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSBmbG93TW9kZWwuaGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIHZhciBzdHlsZSA9IHt9O1xyXG4gICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB2YXIgY29tbWVudHMgPSBbXTtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLm9iamVjdERhdGEgJiYgZmxvd01vZGVsLm9iamVjdERhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjUG9zID0gMDsgY1BvcyA8IGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aDsgY1BvcysrKSB7XHJcbiAgICAgICAgICAgICAgICBjb21tZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tbWVudEJ1YmJsZV8xLmRlZmF1bHQsIHsgZGF0YTogZmxvd01vZGVsLm9iamVjdERhdGFbY1Bvc10sIHByb3BzOiB0aGlzLnByb3BzLCBjYW5EZWxldGU6IGNhbkRlbGV0ZSwgZGVsZXRlOiB0aGlzLmRlbGV0ZUNvbW1lbnQuYmluZCh0aGlzKSB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFkZEJ1dHRvbjtcclxuICAgICAgICBpZiAoZmxvd01vZGVsLmlzRWRpdGFibGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBhZGRCdXR0b24gPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXMgYWRkLWRpYWxvZy1oZWFkZXItYnV0dG9uXCIsIHRpdGxlOiBcIkFkZCBDb21tZW50XCIsIG9uQ2xpY2s6IHRoaXMubW9kYWxDbG9zZS5iaW5kKHRoaXMpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbW9kYWw7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kYWxTaG93bikge1xyXG4gICAgICAgICAgICBtb2RhbCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWxEaWFsb2dfMS5kZWZhdWx0LCB7IG9uQ2xvc2VSZXF1ZXN0OiB0aGlzLm1vZGFsQ2xvc2UuYmluZCh0aGlzKSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImFkZC1kaWFsb2ctaGVhZGVyXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGZsb2F0OiAnbGVmdCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiYWRkLWRpYWxvZy1oZWFkZXItdGl0bGVcIiB9LCBcIkFkZCBhIG5ldyBjb21tZW50XCIpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7IGZsb2F0OiAncmlnaHQnIH0gfSwgYWRkQnV0dG9uKSksXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nLWJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImFkZC1kaWFsb2ctYm9keS1jbGllbnRcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nLWZpZWxkXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nLWlucHV0LWxhYmVsXCIgfSwgXCJDb21tZW50XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nLWlucHV0XCIsIHJlZjogZnVuY3Rpb24gKG5ld0NvbW1lbnQpIHsgX3RoaXMubmV3Q29tbWVudCA9IG5ld0NvbW1lbnQ7IH0sIHR5cGU6IFwidGV4dFwiLCB3aWR0aDogXCI2MHB4XCIgfSkpKSksXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJhZGQtZGlhbG9nLWJ1dHRvbi1iYXJcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImFkZC1kaWFsb2ctYnV0dG9uLWJhci1idXR0b25cIiwgdGl0bGU6IFwiQWRkIENvbW1lbnRcIiwgb25DbGljazogdGhpcy5tb2RhbENsb3NlLmJpbmQodGhpcywgXCJBRERcIikgfSwgXCJBZGRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwiYWRkLWRpYWxvZy1idXR0b24tYmFyLWJ1dHRvblwiLCB0aXRsZTogXCJDYW5jZWxcIiwgb25DbGljazogdGhpcy5tb2RhbENsb3NlLmJpbmQodGhpcykgfSwgXCJDYW5jZWxcIikpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtbGlzdFwiIH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1saXN0LWhlYWRlclwiIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZmxvYXQ6ICdsZWZ0JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1saXN0LWhlYWRlci10aXRsZVwiIH0sIGNhcHRpb24pKSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogeyBmbG9hdDogJ3JpZ2h0JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzIGNvbW1lbnQtbGlzdC1oZWFkZXItYnV0dG9uXCIsIHRpdGxlOiBcIkFkZCBDb21tZW50XCIsIG9uQ2xpY2s6IHRoaXMuYWRkQ29tbWVudC5iaW5kKHRoaXMpIH0pKSksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1saXN0LWJvZHlcIiB9LCBjb21tZW50cyksXHJcbiAgICAgICAgICAgIG1vZGFsKTtcclxuICAgIH07XHJcbiAgICBDb21tZW50c0xpc3QucHJvdG90eXBlLmFkZENvbW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbFNob3duID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9O1xyXG4gICAgQ29tbWVudHNMaXN0LnByb3RvdHlwZS5tb2RhbENsb3NlID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIGlmIChhY3Rpb24gJiYgYWN0aW9uID09IFwiQUREXCIpIHtcclxuICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLm5ld0NvbW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3Q29tbWVudChjb21tZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb2RhbFNob3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21tZW50c0xpc3Q7XHJcbn0oUmVhY3QuQ29tcG9uZW50KSk7XHJcbm1hbnl3aG8uY29tcG9uZW50LnJlZ2lzdGVyKCdDb21tZW50c0xpc3QnLCBDb21tZW50c0xpc3QpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb21tZW50c0xpc3Q7XHJcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIENvbW1lbnRzQ29udHJvbC5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDI1MjUyYTY0MGZlYjgwODE5NzcwIiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIlJlYWN0XCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuY2xhc3MgQ29tbWVudFRhYmxlSXRlbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCA8YW55LCBhbnk+XHJcbntcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KSBcclxuICAgIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSBcclxuICAgIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkgXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGNvbHMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5wcm9wcy5kYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9lYWNoIHByb3BlcnR5IG9mIGRhdGEgaXMgYSBjb2x1bW5cclxuICAgICAgICAgICAgZm9yKHZhciBjUG9zID0gMCA7IGNQb3MgPCB0aGlzLnByb3BzLmRhdGEucHJvcGVydGllcy5sZW5ndGggOyBjUG9zKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLnByb3BzLmRhdGEucHJvcGVydGllc1tjUG9zXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnByb3BzLmhlYWRlcnNbY29sLmRldmVsb3Blck5hbWVdLmlzRGlzcGxheVZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA6IGFueTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5wcm9wcy5oZWFkZXJzW2NvbC5kZXZlbG9wZXJOYW1lXS5vcmRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGNvbC5jb250ZW50VHlwZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJDb250ZW50U3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbC5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJDb250ZW50RGF0ZVRpbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLUdCJywgeyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiAnMi1kaWdpdCcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mb3JtYXQobmV3IERhdGUoY29sLmNvbnRlbnRWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb2wuY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29sc1twb3NdID0gPHRkIGNsYXNzTmFtZT1cImNjLXRib2R5LXJvdy1jZWxsXCI+e3ZhbHVlfTwvdGQ+O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICA8dHIgY2xhc3NOYW1lPVwiY2MtdGJvZHktcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2NvbHN9XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb21tZW50VGFibGVJdGVtXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9Db21tZW50VGFibGVJdGVtLnRzeCIsImRlY2xhcmUgdmFyIG1hbnl3aG86IGFueTtcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuY2xhc3MgQ29tbWVudEJ1YmJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCA8YW55LCBhbnk+XHJcbntcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KSBcclxuICAgIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSBcclxuICAgIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkgXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5wcm9wcy5kYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdobyA9IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHRoaXMucHJvcHMuZGF0YS5wcm9wZXJ0aWVzLCBcIkF1dGhvclwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciB3aGVuID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkodGhpcy5wcm9wcy5kYXRhLnByb3BlcnRpZXMsIFwiRGF0ZVwiKS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHZhciB3aGF0ID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkodGhpcy5wcm9wcy5kYXRhLnByb3BlcnRpZXMsIFwiQ29tbWVudFwiKS5jb250ZW50VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAvL2NvbnZlcnQgd2hlbiB0byBmcmllbmRseSBmb3JtYXRcclxuICAgICAgICAgICAgd2hlbj1uZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tR0InLCB7ICAgXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJywgXHJcbiAgICAgICAgICAgICAgICBkYXk6ICcyLWRpZ2l0JyBcclxuICAgICAgICAgICAgfSkuZm9ybWF0KG5ldyBEYXRlKHdoZW4pKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkZWxldGVCdXR0b24gOiBhbnk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucHJvcHMuY2FuRGVsZXRlID09IHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbiA9IDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIGRlbGV0ZS1jb21tZW50LWJ1dHRvblwiIHRpdGxlPVwiUmVtb3ZlIENvbW1lbnRcIiBvbkNsaWNrPXt0aGlzLnByb3BzLmRlbGV0ZS5iaW5kKHRoaXMsIHRoaXMucHJvcHMuZGF0YSl9Pjwvc3Bhbj5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50LWJ1YmJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW1lbnQtYnViYmxlLWNsaWVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50LWJ1YmJsZS1jbGllbnQtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiAnbGVmdCd9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lID0gXCJjb21tZW50LWJ1YmJsZS1jbGllbnQtaGVhZGVyLXNwYW5cIj5BZGRlZCBieSB7d2hvfSBvbiB7d2hlbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiAncmlnaHQnfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkZWxldGVCdXR0b259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbWVudC1idWJibGUtY2xpZW50LWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZSA9IFwiY29tbWVudC1idWJibGUtY2xpZW50LWJvZHktc3BhblwiPnt3aGF0fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXY+PC9kaXY+XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb21tZW50QnViYmxlXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9Db21tZW50QnViYmxlLnRzeCIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbi8vIERlY2xhcmF0aW9uIG9mIHRoZSBjb21wb25lbnQgYXMgUmVhY3QgQ2xhc3MgQ29tcG9uZW50XHJcbmNsYXNzIE1vZGFsRGlhbG9nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSxhbnk+XHJcbiB7XHJcbiAgXHJcbiAgICBtb2RhbCA6IGFueTtcclxuICAvLyBJbml0IG9mIHRoZSBjb21wb25lbnQgYmVmb3JlIGl0IGlzIG1vdW50ZWQuXHJcbiAgY29uc3RydWN0b3IocHJvcHMgOiBhbnkpIFxyXG4gIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZUtleVVwID0gdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2sgPSB0aGlzLmhhbmRsZU91dHNpZGVDbGljay5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBcclxuICAvLyBBZGQgbGlzdGVuZXJzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC5cclxuICBjb21wb25lbnREaWRNb3VudCgpIFxyXG4gIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAsIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBsaXN0ZW5lcnMgaW1tZWRpYXRlbHkgYmVmb3JlIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBhbmQgZGVzdHJveWVkLlxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgXHJcbiAge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcCwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU91dHNpZGVDbGljaywgZmFsc2UpO1xyXG4gIH1cclxuICBcclxuICAvLyBIYW5kbGUgdGhlIGtleSBwcmVzcyBldmVudC5cclxuICBoYW5kbGVLZXlVcChlIDogYW55KSBcclxuICB7XHJcbiAgICBjb25zdCB7IG9uQ2xvc2VSZXF1ZXN0IH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qga2V5cyA9IHtcclxuICAgICAgMjc6ICgpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb25DbG9zZVJlcXVlc3QoKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLCBmYWxzZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIC8vaWYgKGtleXNbZS5rZXlDb2RlXSkgeyBrZXlzW2Uua2V5Q29kZV0oKTsgfVxyXG4gIH1cclxuICBcclxuICAvLyBIYW5kbGUgdGhlIG1vdXNlIGNsaWNrIG9uIGJyb3dzZXIgd2luZG93LlxyXG4gIGhhbmRsZU91dHNpZGVDbGljayhlIDogYW55KSBcclxuICB7XHJcbiAgICBjb25zdCB7IG9uQ2xvc2VSZXF1ZXN0IH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIC8vaWYgKCF0aGlzLm1vZGFsKSB7XHJcbiAgICAvLyAgaWYgKCF0aGlzLm1vZGFsLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgLy8gICAgb25DbG9zZVJlcXVlc3QoKTtcclxuICAgIC8vICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2ssIGZhbHNlKTtcclxuICAgICAvLyB9XHJcbiAgICAvL31cclxuICB9XHJcbiAgXHJcbiAgLy8gUmVuZGVyIHRoZSBjb21wb25lbnQgcGFzc2luZyBvbkNsb3NlUmVxdWVzdCBhbmQgY2hpbGRyZW4gYXMgcHJvcHMuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgb25DbG9zZVJlcXVlc3QsXHJcbiAgICAgIGNoaWxkcmVuLFxyXG4gICAgICBjbGFzc2VzLFxyXG4gICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtcmVkYWN0aW9uXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbFwiIHJlZj17bm9kZSA9PiAodGhpcy5tb2RhbCA9IG5vZGUpfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtY29udGVudFwiPlxyXG4gICAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwibW9kYWwtY2xvc2UtYnV0dG9uXCIgb25DbGljaz17b25DbG9zZVJlcXVlc3R9XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRXhwb3J0IHRoZSBjb21wb25lbnQgdG8gdXNlIGl0IGluIG90aGVyIGNvbXBvbmVudHMuXHJcbmV4cG9ydCBkZWZhdWx0IE1vZGFsRGlhbG9nO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9Nb2RhbERpYWxvZy50c3giLCJleHBvcnQgKiBmcm9tICcuL0NvbW1lbnRzVGFibGUnO1xuZXhwb3J0ICogZnJvbSAnLi9Db21tZW50VGFibGVJdGVtJztcbmV4cG9ydCAqIGZyb20gJy4vQ29tbWVudHNMaXN0JztcbmV4cG9ydCAqIGZyb20gJy4vQ29tbWVudEJ1YmJsZSc7XG5leHBvcnQgKiBmcm9tICcuL01vZGFsRGlhbG9nJztcblxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXgudHN4IiwiZGVjbGFyZSB2YXIgbWFueXdobzogYW55O1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgQ29tbWVudFRhYmxlSXRlbSBmcm9tICcuL0NvbW1lbnRUYWJsZUl0ZW0nO1xyXG5pbXBvcnQgJy4vQ29tbWVudHNDb250cm9sLmNzcyc7XHJcblxyXG5jbGFzcyBDb21tZW50c1RhYmxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiBcclxue1xyXG4gICBcclxuICAgIGNvbXBvbmVudElkOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgZmxvd0tleTogc3RyaW5nID1cIlwiOyAgICBcclxuICAgIGF0dHJpYnV0ZXMgOiBhbnkgPSB7fTtcclxuICAgIHJlYWRvbmx5IDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzIDogYW55KVxyXG5cdHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJZCA9IHByb3BzLmlkO1xyXG4gICAgICAgIHRoaXMuZmxvd0tleSA9IHByb3BzLmZsb3dLZXk7XHJcblxyXG4gICAgICAgIC8vcHVzaCBhdHRyaWJ1dGVzIGludG8ga2V5ZWQgbWFwIFxyXG5cdFx0dmFyIGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsICAgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHRcdGlmKGZsb3dNb2RlbC5hdHRyaWJ1dGVzKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IodmFyIGtleSBpbiBmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuYXR0cmlidXRlc1trZXldID0gZmxvd01vZGVsLmF0dHJpYnV0ZXNba2V5XTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkgXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgICB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIGNvbnN0IGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIHRoaXMuZmxvd0tleSkgfHwge307XHJcblxyXG4gICAgICAgIHZhciBvYmplY3REYXRhIDogYW55O1xyXG4gICAgICAgIGlmKGZsb3dTdGF0ZS5vYmplY3REYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YT1mbG93U3RhdGUub2JqZWN0RGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YT1mbG93TW9kZWwub2JqZWN0RGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcblx0XHRcdG9iamVjdERhdGE6IFtvYmplY3REYXRhXVxyXG5cdFx0fTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gISBmbG93TW9kZWwuaXNFZGl0YWJsZVxyXG4gICAgfVxyXG5cclxuXHRnZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSA6IHN0cmluZylcclxuXHR7XHJcblx0XHRpZih0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzYXZlKClcclxuICAgIHtcclxuXHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCAgIHRoaXMuZmxvd0tleSk7XHJcblxyXG4gICAgICAgIHZhciBvYmplY3REYXRhID0gZmxvd01vZGVsLm9iamVjdERhdGFbMF07XHJcblxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuXHJcbiAgICAgICAgb2JqZWN0RGF0YS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICAvKlxyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJPcGVyYXRpbmdTeXN0ZW1cIiwgdGhpcy5vcGVyYXRpbmdTeXN0ZW0pO1xyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJCcm93c2VyVmVuZG9yXCIsIHRoaXMuYnJvd3NlclZlbmRvcik7XHJcbiAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkJyb3dzZXJOYW1lXCIsIHRoaXMuYnJvd3Nlck5hbWUpO1xyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJMb25naXR1ZGVcIiwgdGhpcy5sb25naXR1ZGUpO1xyXG4gICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iamVjdERhdGEucHJvcGVydGllcywgXCJMYXRpdHVkZVwiLCB0aGlzLmxhdGl0dWRlKTtcclxuKi9cclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE6IFtvYmplY3REYXRhXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgICAgICBcclxuICAgIHJlbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZmxvd01vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgICB0aGlzLmZsb3dLZXkpO1xyXG4gICAgICAgIGNvbnN0IGZsb3dTdGF0ZSA9IG1hbnl3aG8uc3RhdGUuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgdmFyIGNhcHRpb24gOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcIlRpdGxlXCIpIHx8IFwiQ29tbWVudHNcIjtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgd2lkdGggPSBmbG93TW9kZWwud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgdmFyIGhlaWdodD1mbG93TW9kZWwuaGVpZ2h0ICsgXCJweFwiO1xyXG5cclxuICAgICAgICB2YXIgc3R5bGUgOiBhbnkgPSB7fTtcclxuICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgIHZhciBoZWFkcyA9IFtdO1xyXG4gICAgICAgIHZhciBoZWFkZXJzID0gW107XHJcbiAgICAgICAgdmFyIGNvbW1lbnRzID0gW107XHJcblxyXG4gICAgICAgIGlmKGZsb3dNb2RlbC5jb2x1bW5zICYmIGZsb3dNb2RlbC5jb2x1bW5zLmxlbmd0aCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IodmFyIGhQb3MgPSAwIDsgaFBvcyA8IGZsb3dNb2RlbC5jb2x1bW5zLmxlbmd0aCA7IGhQb3MrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IGZsb3dNb2RlbC5jb2x1bW5zW2hQb3NdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBoZWFkc1tjb2wuZGV2ZWxvcGVyTmFtZV0gPSBjb2w7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaGVhZHNbY29sLmRldmVsb3Blck5hbWVdLmlzRGlzcGxheVZhbHVlKVxyXG4gICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tjb2wub3JkZXJdID0gPHRkIGNsYXNzTmFtZT1cImNjLWNvbHVtbi1oZWFkZXJcIj57Zmxvd01vZGVsLmNvbHVtbnNbaFBvc10ubGFiZWx9PC90ZD47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGZsb3dNb2RlbC5vYmplY3REYXRhICYmIGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IodmFyIGNQb3MgPSAwIDsgY1BvcyA8IGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aCA7IGNQb3MrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29tbWVudHMucHVzaCg8Q29tbWVudFRhYmxlSXRlbSBkYXRhPXtmbG93TW9kZWwub2JqZWN0RGF0YVtjUG9zXX0gaGVhZGVycz17aGVhZHN9PjwvQ29tbWVudFRhYmxlSXRlbT4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJjYy1jb250cm9sXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OidsZWZ0J319PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY2MtaGVhZGVyLXRpdGxlXCI+e2NhcHRpb259PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OidyaWdodCd9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1cyBjYy1oZWFkZXItYnV0dG9uXCIgdGl0bGU9XCJBZGQgQ29tbWVudFwiIG9uQ2xpY2s9e3RoaXMuYWRkQ29tbWVudC5iaW5kKHRoaXMpfT48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNjLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cImNjLXRhYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQgY2xhc3NOYW1lPVwiY2MtdGhlYWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwiY2MtdGhlYWQtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtoZWFkZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzTmFtZT1cImNjLXRib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbW1lbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4gIFxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICB9XHJcbiAgIFxyXG4gICAgYWRkQ29tbWVudCgpXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxufVxyXG5cclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ0NvbW1lbnRzVGFibGUnLCBDb21tZW50c1RhYmxlKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbW1lbnRzVGFibGU7XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvQ29tbWVudHNUYWJsZS50c3giLCJkZWNsYXJlIHZhciBtYW55d2hvOiBhbnk7XHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBDb21tZW50QnViYmxlIGZyb20gJy4vQ29tbWVudEJ1YmJsZSc7XHJcbmltcG9ydCBNb2RhbERpYWxvZyBmcm9tICcuL01vZGFsRGlhbG9nJztcclxuaW1wb3J0ICcuL0NvbW1lbnRzQ29udHJvbC5jc3MnO1xyXG5pbXBvcnQgeyBpc0Jvb2xlYW4gfSBmcm9tICd1dGlsJztcclxuXHJcbmNsYXNzIENvbW1lbnRzTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxhbnksIGFueT4gXHJcbntcclxuICAgXHJcbiAgICBjb21wb25lbnRJZDogc3RyaW5nID0gXCJcIjtcclxuICAgIGZsb3dLZXk6IHN0cmluZyA9XCJcIjsgICAgXHJcbiAgICBhdHRyaWJ1dGVzIDogYW55ID0ge307XHJcbiAgICByZWFkb25seSA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIG1vZGFsU2hvd24gOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgbmV3Q29tbWVudCA6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyA6IGFueSlcclxuXHR7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SWQgPSBwcm9wcy5pZDtcclxuICAgICAgICB0aGlzLmZsb3dLZXkgPSBwcm9wcy5mbG93S2V5O1xyXG5cclxuICAgICAgICAvL3B1c2ggYXR0cmlidXRlcyBpbnRvIGtleWVkIG1hcCBcclxuXHRcdHZhciBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCAgIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcblx0XHRpZihmbG93TW9kZWwuYXR0cmlidXRlcylcclxuXHRcdHtcclxuXHRcdFx0Zm9yKHZhciBrZXkgaW4gZmxvd01vZGVsLmF0dHJpYnV0ZXMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmF0dHJpYnV0ZXNba2V5XSA9IGZsb3dNb2RlbC5hdHRyaWJ1dGVzW2tleV07XHJcblx0XHRcdH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIFxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICBjb25zdCBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG5cclxuICAgICAgICB2YXIgb2JqZWN0RGF0YSA6IGFueTtcclxuICAgICAgICBpZihmbG93U3RhdGUub2JqZWN0RGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE9Zmxvd1N0YXRlLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE9Zmxvd01vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmplY3REYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmplY3REYXRhKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge1xyXG5cdFx0XHRvYmplY3REYXRhOiBvYmplY3REYXRhXHJcblx0XHR9O1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgbmV3U3RhdGUsIHRoaXMuZmxvd0tleSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSAhIGZsb3dNb2RlbC5pc0VkaXRhYmxlXHJcbiAgICB9XHJcblxyXG5cdGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lIDogc3RyaW5nKVxyXG5cdHtcclxuXHRcdGlmKHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZU9iamVjdERhdGEob25lIDogYW55ICwgdHdvIDogYW55KSA6IGJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICBcclxuICAgICAgICBpZihtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShvbmUucHJvcGVydGllcywgXCJBdXRob3JcIikuY29udGVudFZhbHVlID09IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHR3by5wcm9wZXJ0aWVzLCBcIkF1dGhvclwiKS5jb250ZW50VmFsdWUgJiZcclxuICAgICAgICAgICAgbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob25lLnByb3BlcnRpZXMsIFwiRGF0ZVwiKS5jb250ZW50VmFsdWUgPT09IG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KHR3by5wcm9wZXJ0aWVzLCBcIkRhdGVcIikuY29udGVudFZhbHVlICYmXHJcbiAgICAgICAgICAgIG1hbnl3aG8udXRpbHMuZ2V0T2JqZWN0RGF0YVByb3BlcnR5KG9uZS5wcm9wZXJ0aWVzLCBcIkNvbW1lbnRcIikuY29udGVudFZhbHVlID09PSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eSh0d28ucHJvcGVydGllcywgXCJDb21tZW50XCIpLmNvbnRlbnRWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNvbW1lbnQoY29tbWVudCA6IGFueSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBmbG93U3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLmZsb3dLZXkpIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZsb3dNb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsICAgdGhpcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgdmFyIG9iamVjdERhdGFBcnJheSA9IFtdO1xyXG4gICAgICAgIC8vbG9vcCBvdmVyIG1vZGVsIGFkZGluZyB0byBuZXdzdGF0ZSBpZiBub3QgZXF1YWxcclxuICAgICAgICBmb3IodmFyIG9Qb3MgPSAwIDsgb1BvcyA8IGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aDsgb1BvcysrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9iamVjdERhdGEgPSBmbG93TW9kZWwub2JqZWN0RGF0YVtvUG9zXTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLmNvbXBhcmVPYmplY3REYXRhKG9iamVjdERhdGEsIGNvbW1lbnQpID09IGZhbHNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3REYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmplY3REYXRhKSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3REYXRhQXJyYXkucHVzaChvYmplY3REYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhOiBvYmplY3REYXRhQXJyYXlcclxuICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCBuZXdTdGF0ZSwgdGhpcy5mbG93S2V5LCB0cnVlKTtcclxuICAgICAgICBtYW55d2hvLmVuZ2luZS5zeW5jKHRoaXMuZmxvd0tleSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZE5ld0NvbW1lbnQoY29tbWVudCA6IHN0cmluZylcclxuICAgIHtcclxuXHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgdGhpcy5mbG93S2V5KTtcclxuICAgICAgICBjb25zdCBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCAgIHRoaXMuZmxvd0tleSk7XHJcblxyXG4gICAgICAgIHZhciBvYmplY3REYXRhIDogYW55ID0ge307XHJcblxyXG4gICAgICAgIGlmKGZsb3dNb2RlbC5vYmplY3REYXRhICYmIGZsb3dNb2RlbC5vYmplY3REYXRhLmxlbmd0aCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvYmplY3REYXRhID0gZmxvd01vZGVsLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGEucHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgICAgICBvYmplY3REYXRhLmRldmVsb3Blck5hbWUgPSBcIkNvbW1lbnRcIjtcclxuICAgICAgICAgICAgb2JqZWN0RGF0YS5wcm9wZXJ0aWVzLnB1c2goe2RldmVsb3Blck5hbWU6IFwiQXV0aG9yXCIsIGNvbnRlbnRUeXBlOlwiQ29udGVudFN0cmluZ1wiLCBjb250ZW50VmFsdWU6XCJcIn0pO1xyXG4gICAgICAgICAgICBvYmplY3REYXRhLnByb3BlcnRpZXMucHVzaCh7ZGV2ZWxvcGVyTmFtZTogXCJEYXRlXCIsIGNvbnRlbnRUeXBlOlwiQ29udGVudERhdGVUaW1lXCIsIGNvbnRlbnRWYWx1ZTpcIlwifSk7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGEucHJvcGVydGllcy5wdXNoKHtkZXZlbG9wZXJOYW1lOiBcIkNvbW1lbnRcIiwgY29udGVudFR5cGU6XCJDb250ZW50U3RyaW5nXCIsIGNvbnRlbnRWYWx1ZTpcIlwifSk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgIG9iamVjdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdERhdGEpKTtcclxuXHJcbiAgICAgICAgb2JqZWN0RGF0YS5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiQXV0aG9yXCIsIFwibWVcIik7XHJcbiAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqZWN0RGF0YS5wcm9wZXJ0aWVzLCBcIkRhdGVcIiwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcclxuICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmplY3REYXRhLnByb3BlcnRpZXMsIFwiQ29tbWVudFwiLCBjb21tZW50KTtcclxuICAgICAgIFxyXG4gICAgICAgIHZhciBvYmplY3REYXRhQXJyYXkgPSBmbG93TW9kZWwub2JqZWN0RGF0YSB8fCBbXTtcclxuICAgICAgICBvYmplY3REYXRhQXJyYXkucHVzaChvYmplY3REYXRhKTtcclxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9iamVjdERhdGE6IG9iamVjdERhdGFBcnJheVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMuY29tcG9uZW50SWQsIG5ld1N0YXRlLCB0aGlzLmZsb3dLZXksIHRydWUpO1xyXG4gICAgICAgIG1hbnl3aG8uZW5naW5lLnN5bmModGhpcy5mbG93S2V5KTtcclxuICAgIH1cclxuICAgICAgIFxyXG4gICAgcmVuZGVyKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBmbG93TW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLmNvbXBvbmVudElkLCAgIHRoaXMuZmxvd0tleSk7XHJcbiAgICAgICAgY29uc3QgZmxvd1N0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5jb21wb25lbnRJZCwgICB0aGlzLmZsb3dLZXkpO1xyXG5cclxuICAgICAgICB2YXIgY2FwdGlvbiA6IHN0cmluZyA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiVGl0bGVcIikgfHwgXCJDb21tZW50c1wiO1xyXG4gICAgICAgIHZhciBjYW5EZWxldGUgOiBib29sZWFuID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJDYW4gRGVsZXRlXCIpID09IFwidHJ1ZVwiIHx8IHRoaXMuZ2V0QXR0cmlidXRlKFwiQ2FuRGVsZXRlXCIpID09IFwidHJ1ZVwiPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHdpZHRoID0gZmxvd01vZGVsLndpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIHZhciBoZWlnaHQ9Zmxvd01vZGVsLmhlaWdodCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgdmFyIHN0eWxlIDogYW55ID0ge307XHJcbiAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICB2YXIgY29tbWVudHMgPSBbXTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoZmxvd01vZGVsLm9iamVjdERhdGEgJiYgZmxvd01vZGVsLm9iamVjdERhdGEubGVuZ3RoID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgY1BvcyA9IDAgOyBjUG9zIDwgZmxvd01vZGVsLm9iamVjdERhdGEubGVuZ3RoIDsgY1BvcysrKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29tbWVudHMucHVzaCg8Q29tbWVudEJ1YmJsZSBkYXRhPXtmbG93TW9kZWwub2JqZWN0RGF0YVtjUG9zXX0gcHJvcHM9e3RoaXMucHJvcHN9IGNhbkRlbGV0ZT17Y2FuRGVsZXRlfSBkZWxldGU9e3RoaXMuZGVsZXRlQ29tbWVudC5iaW5kKHRoaXMpfT48L0NvbW1lbnRCdWJibGU+KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFkZEJ1dHRvbiA6IGFueTtcclxuICAgICAgICBpZihmbG93TW9kZWwuaXNFZGl0YWJsZSA9PSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWRkQnV0dG9uID0gPHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzIGFkZC1kaWFsb2ctaGVhZGVyLWJ1dHRvblwiIHRpdGxlPVwiQWRkIENvbW1lbnRcIiBvbkNsaWNrPXt0aGlzLm1vZGFsQ2xvc2UuYmluZCh0aGlzKX0+PC9zcGFuPlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG1vZGFsIDogYW55O1xyXG4gICAgICAgIGlmKHRoaXMubW9kYWxTaG93bilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vZGFsPSAgPE1vZGFsRGlhbG9nIG9uQ2xvc2VSZXF1ZXN0PXt0aGlzLm1vZGFsQ2xvc2UuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkLWRpYWxvZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGQtZGlhbG9nLWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDonbGVmdCd9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWRkLWRpYWxvZy1oZWFkZXItdGl0bGVcIj5BZGQgYSBuZXcgY29tbWVudDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6J3JpZ2h0J319PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWRkQnV0dG9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkZC1kaWFsb2ctYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkLWRpYWxvZy1ib2R5LWNsaWVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkZC1kaWFsb2ctZmllbGRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFkZC1kaWFsb2ctaW5wdXQtbGFiZWxcIj5Db21tZW50PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT1cImFkZC1kaWFsb2ctaW5wdXRcIiByZWY9eyhuZXdDb21tZW50KSA9PiB7IHRoaXMubmV3Q29tbWVudCA9IG5ld0NvbW1lbnQgfX0gdHlwZT1cInRleHRcIiB3aWR0aD1cIjYwcHhcIj48L2lucHV0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhZGQtZGlhbG9nLWJ1dHRvbi1iYXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImFkZC1kaWFsb2ctYnV0dG9uLWJhci1idXR0b25cIiB0aXRsZT1cIkFkZCBDb21tZW50XCIgb25DbGljaz17dGhpcy5tb2RhbENsb3NlLmJpbmQodGhpcyxcIkFERFwiKX0+QWRkPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJhZGQtZGlhbG9nLWJ1dHRvbi1iYXItYnV0dG9uXCIgdGl0bGU9XCJDYW5jZWxcIiBvbkNsaWNrPXt0aGlzLm1vZGFsQ2xvc2UuYmluZCh0aGlzKX0+Q2FuY2VsPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbERpYWxvZz5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImNvbW1lbnQtbGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbWVudC1saXN0LWhlYWRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6J2xlZnQnfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjb21tZW50LWxpc3QtaGVhZGVyLXRpdGxlXCI+e2NhcHRpb259PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OidyaWdodCd9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1cyBjb21tZW50LWxpc3QtaGVhZGVyLWJ1dHRvblwiIHRpdGxlPVwiQWRkIENvbW1lbnRcIiBvbkNsaWNrPXt0aGlzLmFkZENvbW1lbnQuYmluZCh0aGlzKX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50LWxpc3QtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHtjb21tZW50c30gICBcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICB7bW9kYWx9XHJcbiAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgfVxyXG4gICBcclxuICAgIGFkZENvbW1lbnQoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubW9kYWxTaG93biA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGFsQ2xvc2UoYWN0aW9uIDogYW55KVxyXG4gICAge1xyXG4gICAgICAgIGlmKGFjdGlvbiAmJiBhY3Rpb249PVwiQUREXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29tbWVudCAgPSB0aGlzLm5ld0NvbW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTmV3Q29tbWVudChjb21tZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kYWxTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbn1cclxuXHJcbm1hbnl3aG8uY29tcG9uZW50LnJlZ2lzdGVyKCdDb21tZW50c0xpc3QnLCBDb21tZW50c0xpc3QpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudHNMaXN0O1xyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0NvbW1lbnRzTGlzdC50c3giXSwic291cmNlUm9vdCI6IiJ9